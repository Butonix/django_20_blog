{% extends 'base.html' %}

{% block title %}{{ block.super }}{% endblock %}
{% block content %}
    <div class="row">
    <div class="col-md-10 ml-auto mr-auto">
    <h1>{{ title }}</h1>

    <form method="GET" action="" class="form-inline">

        <input type="text" name="q" placeholder="Searc posts" class="form-control mr-2" value="{{ request.GET.q }}">
        <input type="submit" value="Search" class="btn btn-primary">
    </form>

    {% for obj in object_list %}
{#        <a href='{% url "posts:post_detail" id=obj.id%}'>{{ obj.title }}</a><br/>#}
        <div class="row">
            <div class="col-12">
                <div class="card border-0 mt-3 shadow p-3 mb-5 bg-white rounded">
                    <div class="card-body">
                        {% if obj.image %}
                         <img src="{{ obj.image.url }}" class="img-fluid">
                        {% endif %}
                        <div class="card-title">
                            <h3>{% if obj.draft %}Draft {% endif %}</h3>
                            <h4>{% if obj.publish > today %}Future Post {% endif %} </h4>
                            <h3><a href='{{ obj.get_absolute_url }}'>{{ obj.title }} </a></h3>
                            <small>{{ obj.publish }}</small></div>
                        {% if obj.user.get_full_name %}<p>Author: {{ obj.user.get_full_name }}</p>{% endif %}
                        <p class="card-text">{{ obj.content|linebreaks|truncatechars:300 }}</p>
                        <a href="#" class="btn btn-primary">Read</a>
                    </div>
                </div>
            </div>
        <hr>
        </div>
    {% endfor %}
        <div class="pagination">
            <span class="step-links">
                {% if object_list.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ object_list.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ object_list.number }} of {{ object_list.paginator.num_pages }}.
                </span>

                {% if object_list.has_next %}
                    <a href="?page={{ object_list.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">next</a>
                    <a href="?page={{ object_list.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>

{#        {% if object_list.has_other_pages %}#}
{#            <ul class="pagination">#}
{#                {% if object_list.has_previous %}#}
{#                    <li><a href="?page={{ object_list.previous_page_number }}">&laquo;</a></li>#}
{#                {% else %}#}
{#                    <li class="disabled"><span>&laquo;</span></li>#}
{#                {% endif %}#}
{#                {% for i in object_list.paginator.page_range %}#}
{#                    {% if object_list.number == i %}#}
{#                    <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>#}
{#                    {% else %}#}
{#                    <li><a href="?page={{ i }}">{{ i }}</a></li>#}
{#                    {% endif %}#}
{#                {% endfor %}#}
{#                {% if object_list.has_next %}#}
{#                    <li><a href="?page={{ object_list.next_page_number }}">&raquo;</a></li>#}
{#                {% else %}#}
{#                    <li class="disabled"><span>&raquo;</span></li>#}
{#                {% endif %}#}
{#            </ul>#}
{#        {% endif %}#}

    </div>
    </div>
{%  endblock %}


